/** 
 * genie - v0.1.2 @license
 * (c) 2013-12-17 - Kent C. Dodds <kent@doddsfamily.us>
 * A JavaScript library committed to improving user experience by empowering users to interact with web apps using the keyboard (better than cryptic shortcuts).
 * Freely distributed under the MIT license
 * https://github.com/kentcdodds/genie
 */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.genie=b()}(this,function(){function a(){return"g-"+w++}function b(d,e,f,g,h){if(Array.isArray(d)){if("object"==typeof d[0]){for(var i=[],j=0;j<d.length;j++)i.push(b(d[j]));return i}}else{if("object"==typeof d)return b(d.magicWords,d.action,d.context,d.data,d.id);d=[d]}void 0===h&&(h=a());for(var j=0;j<d.length;j++)if("object"==typeof d[j])throw"Cannot make an object a magic word!\n"+JSON.stringify(d,null,2);e=c(e);var k={id:h,context:f||y,data:g,magicWords:d,action:e};return v[h]=k,v[h]}function c(a){return"function"==typeof a?a:("string"==typeof a&&(a={destination:a}),function(){a.openNewTab?window.open(a.destination,"_blank"):window.location.href=a.destination})}function d(a){"object"==typeof a&&a.id&&(a=a.id);var b=v[a];delete v[a];for(var c in x)-1!=x[c].indexOf(a)&&x[c].splice(x[c].indexOf(a),1);return b}function e(){var a=m();return m({wishes:{},noWishMerge:!0,previousId:0,enteredMagicWords:[],contexts:y,previousContext:y,enabled:!0}),a}function f(a){var b,c,d,e,f;if(void 0===a)a="";else{if(null===a)return[];if("object"==typeof a)throw"Cannot match wishes to an object!\n"+JSON.stringify(a,null,2)}for(c=x[a]||[],b=g(c,a),c=c.concat(b),d=[],e=0;e<c.length;e++)f=v[c[e]],f&&l(f)&&d.push(f);return d}function g(a,b){var c=[],d=[];for(var e in v)if(-1==a.indexOf(e)){var f=v[e],g=h(f.magicWords,b);g!==D.noMatch&&(c[g]=c[g]||[],c[g].push(e))}for(var i=c.length;i>0;i--){var j=c[i-1];j&&(d=d.concat(j))}return d}function h(a,b){for(var c=D.noMatch,d=0;d<a.length;d++){var e=i(a[d],b);if(e>c&&(c=e),c===D.equals)break}return c}function i(a,b){var c,d,e,f,g="";if(a=(""+a).toLowerCase(),b=(""+b).toLowerCase(),b.length>a.length)return D.noMatch;if(a===b)return D.equals;if(0===a.indexOf(b))return D.startsWith;if(-1!==a.indexOf(" "+b))return D.wordStartsWith;if(-1!==a.indexOf(b))return D.contains;if(1===b.length)return D.noMatch;for(c=a.split(" "),e=0;e<c.length;e++)for(d=c[e].split("-"),f=0;f<d.length;f++)g+=d[f].substr(0,1);return-1!=g.indexOf(b)?D.acronym:j(a,b)}function j(a,b){for(var c=0,d=0;d<b.length;d++){for(var e=b[d],f=!1,g=c;g<a.length;g++){var h=a[g];if(h==e){f=!0,c=g+1;break}}if(!f)return D.noMatch}return D.matches}function k(a,b){var c,d,e,g,h;if("object"!=typeof a&&(a=v[a]),(null===a||void 0===a)&&(h=f(b),h.length>0&&(a=h[0])),!(a&&v[a.id]&&a.action&&l(a)))return null;if(a.action(a),void 0!==b){if(x[b]=x[b]||[],c=a.id,d=x[b],e=d.indexOf(c),0===e)return a;-1!=e&&d.splice(e,1),1!=e&&d.length>0&&(g=d[0],d[0]=c,c=g),d.unshift(c)}return a}function l(a){var b=z===y,c=a.context===y,d=a.context===z,e=!1,f=Array.isArray(a.context)?a.context:[a.context],g=Array.isArray(z)?z:[z];if(g.length>=f.length)for(var h=0;h<f.length&&(e=f[h]===g[h],e);h++);return b||c||d||e}function m(a){return a&&(a.wishes&&(a.noWishMerge?v=a.wishes:n(a.wishes)),w=a.previousId||w,x=a.enteredMagicWords||x,z=a.context||z,A=a.previousContext||A,B=a.enabled||B,C=a.returnOnDisabled||C),{wishes:v,previousId:w,enteredMagicWords:x,contexts:z,previousContext:A,enabled:B}}function n(a){var b;for(var c in a)b=a[c],b.action||v[c]&&(b.action=v[c].action),b.action&&(v[c]=b);return v}function o(a){return void 0!==a&&(A=z,z=a),z}function p(){return o(A)}function q(){return o(y)}function r(a){return void 0!==a&&(B=a),B}function s(a){return void 0!==a&&(C=a),C}function t(a,b){return function(){return B||a===r?a.apply(this,arguments):C?b:null}}var u=null,v={},w=0,x={},y="universe",z=y,A=y,B=!0,C=!0,D={equals:6,startsWith:5,wordStartsWith:4,contains:3,acronym:2,matches:1,noMatch:0};return u=t(b,{}),u.getMatchingWishes=t(f,[]),u.makeWish=t(k,{}),u.options=t(m,{}),u.mergeWishes=t(n,{}),u.deregisterWish=t(d,{}),u.reset=t(e,{}),u.context=t(o,""),u.revertContext=t(p,""),u.restoreContext=t(q,""),u.enabled=t(r,!1),u.returnOnDisabled=t(s,!0),u});