/** 
 * genie - v0.1.1 @license
 * (c) 2013-12-14 - Kent C. Dodds <kent@doddsfamily.us>
 * A JavaScript library committed to improving user experience by allowing users to more easily perform more actions with their keyboard than cryptic keyboard shortcuts
 * Freely distributed under the MIT license
 * https://github.com/kentcdodds/genie
 */
!function(a){function b(){return"g-"+w++}function c(a,e,f,g,h){if(Array.isArray(a)){if("object"==typeof a[0]){for(var i=[],j=0;j<a.length;j++)i.push(c(a[j]));return i}}else{if("object"==typeof a)return c(a.magicWords,a.action,a.context,a.data,a.id);a=[a]}void 0===h&&(h=b());for(var j=0;j<a.length;j++)if("object"==typeof a[j])throw"Cannot make an object a magic word!\n"+JSON.stringify(a,null,2);e=d(e);var k={id:h,context:f||y,data:g,magicWords:a,action:e};return v[h]=k,v[h]}function d(a){return"function"==typeof a?a:("string"==typeof a&&(a={destination:a}),function(){a.openNewTab?window.open(a.destination,"_blank"):window.location.href=a.destination})}function e(a){"object"==typeof a&&a.id&&(a=a.id);var b=v[a];delete v[a];for(var c in x)-1!=x[c].indexOf(a)&&x[c].splice(x[c].indexOf(a),1);return b}function f(){var a=n();return n({wishes:{},noWishMerge:!0,previousId:0,enteredMagicWords:[],contexts:y,previousContext:y,enabled:!0}),a}function g(a){var b,c,d,e,f;if(void 0===a)a="";else{if(null===a)return[];if("object"==typeof a)throw"Cannot match wishes to an object!\n"+JSON.stringify(a,null,2)}for(c=x[a]||[],b=h(c,a),c=c.concat(b),d=[],e=0;e<c.length;e++)f=v[c[e]],f&&m(f)&&d.push(f);return d}function h(a,b){var c=[],d=[];for(var e in v)if(-1==a.indexOf(e)){var f=v[e],g=i(f.magicWords,b);g!==D.noMatch&&(c[g]=c[g]||[],c[g].push(e))}for(var h=c.length;h>0;h--){var j=c[h-1];j&&(d=d.concat(j))}return d}function i(a,b){for(var c=D.noMatch,d=0;d<a.length;d++){var e=j(a[d],b);if(e>c&&(c=e),c===D.equals)break}return c}function j(a,b){var c,d,e,f,g="";if(a=(""+a).toLowerCase(),b=(""+b).toLowerCase(),b.length>a.length)return D.noMatch;if(a===b)return D.equals;if(0===a.indexOf(b))return D.startsWith;if(-1!==a.indexOf(" "+b))return D.wordStartsWith;if(-1!==a.indexOf(b))return D.contains;if(1===b.length)return D.noMatch;for(c=a.split(" "),e=0;e<c.length;e++)for(d=c[e].split("-"),f=0;f<d.length;f++)g+=d[f].substr(0,1);return-1!=g.indexOf(b)?D.acronym:k(a,b)}function k(a,b){for(var c=0,d=0;d<b.length;d++){for(var e=b[d],f=!1,g=c;g<a.length;g++){var h=a[g];if(h==e){f=!0,c=g+1;break}}if(!f)return D.noMatch}return D.matches}function l(a,b){var c,d,e,f,h;if("object"!=typeof a&&(a=v[a]),(null===a||void 0===a)&&(h=g(b),h.length>0&&(a=h[0])),!(a&&v[a.id]&&a.action&&m(a)))return null;if(a.action(a),void 0!==b){if(x[b]=x[b]||[],c=a.id,d=x[b],e=d.indexOf(c),0===e)return a;-1!=e&&d.splice(e,1),1!=e&&d.length>0&&(f=d[0],d[0]=c,c=f),d.unshift(c)}return a}function m(a){var b=z===y,c=a.context===y,d=a.context===z,e=!1,f=Array.isArray(a.context)?a.context:[a.context],g=Array.isArray(z)?z:[z];if(g.length>=f.length)for(var h=0;h<f.length&&(e=f[h]===g[h],e);h++);return b||c||d||e}function n(a){return a&&(a.wishes&&(a.noWishMerge?v=a.wishes:o(a.wishes)),w=a.previousId||w,x=a.enteredMagicWords||x,z=a.context||z,A=a.previousContext||A,B=a.enabled||B,C=a.returnOnDisabled||C),{wishes:v,previousId:w,enteredMagicWords:x,contexts:z,previousContext:A,enabled:B}}function o(a){var b;for(var c in a)b=a[c],b.action||v[c]&&(b.action=v[c].action),b.action&&(v[c]=b);return v}function p(a){return void 0!==a&&(A=z,z=a),z}function q(){return p(A)}function r(){return p(y)}function s(a){return void 0!==a&&(B=a),B}function t(a){return void 0!==a&&(C=a),C}function u(a,b){return function(){return B||a===s?a.apply(this,arguments):C?b:void 0}}var v={},w=0,x={},y="universe",z=y,A=y,B=!0,C=!0,D={equals:6,startsWith:5,wordStartsWith:4,contains:3,acronym:2,matches:1,noMatch:0};a.genie=u(c,{}),a.genie.getMatchingWishes=u(g,[]),a.genie.makeWish=u(l,{}),a.genie.options=u(n,{}),a.genie.mergeWishes=u(o,{}),a.genie.deregisterWish=u(e,{}),a.genie.reset=u(f,{}),a.genie.context=u(p,""),a.genie.revertContext=u(q,""),a.genie.restoreContext=u(r,""),a.genie.enabled=u(s,!1),a.genie.returnOnDisabled=u(t,!0)}(this);